<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Test</title>
</head>
<body>
    <h1>Admin Delete Test</h1>
    
    <button onclick="testDeletePost()">Test Delete Post (ID: 1)</button>
    <button onclick="checkAuth()">Check Authentication</button>
    
    <div id="results"></div>

    <script>
        function testDeletePost() {
            console.log('Testing delete post...');
            
            fetch('/admin/posts/delete/1', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                console.log('Response status:', response.status);
                return response.json();
            })
            .then(data => {
                console.log('Response data:', data);
                document.getElementById('results').innerHTML = 
                    '<p>Status: ' + (data.success ? 'SUCCESS' : 'FAILED') + '</p>' +
                    '<p>Message: ' + data.message + '</p>';
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('results').innerHTML = 
                    '<p style="color: red;">Error: ' + error.message + '</p>';
            });
        }

        function checkAuth() {
            fetch('/admin', {
                method: 'GET'
            })
            .then(response => {
                console.log('Admin page status:', response.status);
                if (response.status === 200) {
                    document.getElementById('results').innerHTML = 
                        '<p style="color: green;">✅ Admin access granted</p>';
                } else if (response.status === 403) {
                    document.getElementById('results').innerHTML = 
                        '<p style="color: red;">❌ Access denied - Not admin</p>';
                } else {
                    document.getElementById('results').innerHTML = 
                        '<p style="color: orange;">⚠️ Status: ' + response.status + '</p>';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('results').innerHTML = 
                    '<p style="color: red;">Error: ' + error.message + '</p>';
            });
        }
    </script>
</body>
</html>
